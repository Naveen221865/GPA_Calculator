<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPA Calculator</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸŽ“</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            transition: all 0.4s ease;
        }

        .dark {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        }

        .glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .dark .glass {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .animate-bounce-slow {
            animation: bounce 2s infinite;
        }

        .animate-pulse-glow {
            animation: pulse-glow 2s ease-in-out infinite alternate;
        }

        @keyframes pulse-glow {
            from {
                box-shadow: 0 0 20px rgba(99, 102, 241, 0.4);
            }

            to {
                box-shadow: 0 0 30px rgba(99, 102, 241, 0.8);
            }
        }

        .hover-lift {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .hover-lift:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .input-glow:focus {
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3), 0 0 20px rgba(99, 102, 241, 0.2);
        }

        .btn-vibrant {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            transition: all 0.3s ease;
        }

        .btn-vibrant:hover {
            background: linear-gradient(45deg, #ee5a24, #ff6b6b);
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(238, 90, 36, 0.4);
        }

        .btn-success {
            background: linear-gradient(45deg, #00d2d3, #54a0ff);
        }

        .btn-success:hover {
            background: linear-gradient(45deg, #54a0ff, #00d2d3);
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(84, 160, 255, 0.4);
        }

        .floating {
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        .slide-in {
            animation: slideIn 0.6s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }

            to {
                opacity: 0;
                transform: translateY(-1000px) rotate(720deg);
            }
        }

        .background-circles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
        }

        .background-circles li {
            position: absolute;
            display: block;
            list-style: none;
            width: 20px;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            animation: animate 25s linear infinite;
            bottom: -150px;
            border-radius: 50%;
        }

        .background-circles li:nth-child(1) {
            left: 5%;
            width: 80px;
            height: 80px;
            animation-delay: 0s;
        }

        .background-circles li:nth-child(2) {
            left: 95%;
            width: 20px;
            height: 20px;
            animation-delay: 2s;
            animation-duration: 12s;
        }

        .background-circles li:nth-child(3) {
            left: 15%;
            width: 20px;
            height: 20px;
            animation-delay: 4s;
        }

        .background-circles li:nth-child(4) {
            left: 85%;
            width: 60px;
            height: 60px;
            animation-delay: 0s;
            animation-duration: 18s;
        }

        .background-circles li:nth-child(5) {
            left: 25%;
            width: 20px;
            height: 20px;
            animation-delay: 0s;
        }

        .background-circles li:nth-child(6) {
            left: 75%;
            width: 110px;
            height: 110px;
            animation-delay: 3s;
        }

        .background-circles li:nth-child(7) {
            left: 10%;
            width: 150px;
            height: 150px;
            animation-delay: 7s;
        }

        .background-circles li:nth-child(8) {
            left: 90%;
            width: 25px;
            height: 25px;
            animation-delay: 15s;
            animation-duration: 45s;
        }

        .background-circles li:nth-child(9) {
            left: 20%;
            width: 15px;
            height: 15px;
            animation-delay: 2s;
            animation-duration: 35s;
        }

        .background-circles li:nth-child(10) {
            left: 80%;
            width: 150px;
            height: 150px;
            animation-delay: 0s;
            animation-duration: 11s;
        }

        .background-circles li:nth-child(11) {
            left: 5%;
            width: 40px;
            height: 40px;
            animation-delay: 5s;
            animation-duration: 15s;
        }

        .background-circles li:nth-child(12) {
            left: 95%;
            width: 50px;
            height: 50px;
            animation-delay: 1s;
            animation-duration: 25s;
        }

        .background-circles li:nth-child(13) {
            left: 28%;
            width: 30px;
            height: 30px;
            animation-delay: 8s;
            animation-duration: 20s;
        }

        .background-circles li:nth-child(14) {
            left: 72%;
            width: 40px;
            height: 40px;
            animation-delay: 6s;
            animation-duration: 18s;
        }

        .background-circles li:nth-child(15) {
            left: 12%;
            width: 60px;
            height: 60px;
            animation-delay: 4s;
            animation-duration: 22s;
        }

        @keyframes animate {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
                border-radius: 0;
            }

            100% {
                transform: translateY(-1000px) rotate(720deg);
                opacity: 0;
                border-radius: 50%;
            }
        }
    </style>
</head>

<body class="text-white min-h-screen pb-20 relative overflow-x-hidden">
    <ul class="background-circles">
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ul>
    <nav class="p-6 max-w-6xl mx-auto text-center">
        <h1 class="text-3xl font-bold text-white floating">
            <i class="fas fa-graduation-cap mr-2 text-yellow-300"></i>
            GPA Calculator
        </h1>
    </nav>

    <main class="max-w-5xl mx-auto px-4">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
            <div class="glass p-6 rounded-3xl text-center hover-lift animate-pulse-glow">
                <div class="flex items-center justify-center mb-3">
                    <i class="fas fa-chart-line text-2xl text-orange-500 mr-2"></i>
                    <p class="text-gray-700 text-lg font-medium">Current GPA</p>
                </div>
                <h2 id="currentGPA" class="text-5xl font-bold text-gray-800 mb-3">0.00</h2>
                <div class="w-full bg-gray-200 rounded-full h-2 overflow-hidden">
                    <div id="gpaBar" class="h-2 rounded-full transition-all duration-700 ease-out" style="width: 0%">
                    </div>
                </div>
                <p id="gpaStatus" class="text-gray-600 text-sm mt-2 font-medium">Enter subjects to calculate</p>
            </div>

            <div class="glass p-6 rounded-3xl hover-lift">
                <div class="flex items-center justify-center mb-3">
                    <i class="fas fa-history text-2xl text-orange-500 mr-2"></i>
                    <p class="text-gray-700 text-lg font-medium">Previous CGPA</p>
                </div>
                <div class="mb-4">
                    <input type="number" id="previousCGPA" placeholder="0.00" step="0.01" min="0" max="10"
                        class="input-glow w-full p-3 bg-gray-100 text-gray-800 placeholder-gray-500 rounded-xl outline-none transition-all text-center text-2xl font-bold">
                </div>
                <div class="mb-3">
                    <input type="number" id="completedSemesters" placeholder="0" min="0"
                        class="input-glow w-full p-3 bg-gray-100 text-gray-800 placeholder-gray-500 rounded-xl outline-none transition-all text-center">
                    <p class="text-gray-500 text-xs mt-1">Completed Semesters</p>
                </div>
            </div>

            <div class="glass p-6 rounded-3xl text-center hover-lift">
                <div class="flex items-center justify-center mb-3">
                    <i class="fas fa-trophy text-2xl text-orange-500 mr-2"></i>
                    <p class="text-gray-700 text-lg font-medium">Overall CGPA</p>
                </div>
                <h2 id="overallCGPA" class="text-5xl font-bold text-gray-800 mb-3">0.00</h2>
                <div class="flex gap-2 mb-2">
                    <button onclick="saveSemester()"
                        class="flex-1 btn-success text-white font-semibold py-2 px-3 rounded-xl transition-all text-sm">
                        <i class="fas fa-save mr-1"></i>Save
                    </button>
                    <button onclick="resetAll()"
                        class="btn-vibrant text-white font-semibold py-2 px-3 rounded-xl transition-all text-sm">
                        <i class="fas fa-trash mr-1"></i>Reset
                    </button>
                </div>
                <p class="text-gray-500 text-xs">Including previous semesters</p>
            </div>
        </div>

        <div class="glass rounded-3xl overflow-hidden mb-8 hover-lift">
            <div class="p-6 border-b border-gray-200 flex justify-between items-center">
                <h3 class="font-bold text-xl text-gray-800 flex items-center">
                    <i class="fas fa-book-open mr-3 text-orange-500"></i>
                    Subjects & Grades
                </h3>
                <div class="flex gap-3 items-center">

                    <button onclick="addRow()"
                        class="btn-success text-white px-6 py-3 rounded-xl font-bold transition-all">
                        <i class="fas fa-plus mr-2"></i>Add Subject
                    </button>
                </div>
            </div>

            <div class="p-6">
                <div id="subjectContainer" class="space-y-4">

                </div>
            </div>
        </div>

        <div id="savedSemestersContainer" class="hidden">
            <h3 class="font-bold text-xl text-white mb-6 flex items-center">
                <i class="fas fa-history mr-3 text-orange-500"></i>
                Semester History
            </h3>
            <div id="semesterList" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            </div>
        </div>
    </main>

    <script>


        // --- Core Logic ---
        let semesterHistory = JSON.parse(localStorage.getItem('semesterHistory')) || [];

        function addRow() {
            const container = document.getElementById('subjectContainer');
            const newRow = document.createElement('div');
            newRow.className = 'subject-row glass p-4 rounded-2xl slide-in';
            newRow.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 items-center">
                    <div class="md:col-span-1">
                        <input type="text" placeholder="Subject Name" class="subject-name input-glow w-full p-3 bg-gray-100 text-gray-800 placeholder-gray-500 rounded-xl outline-none transition-all">
                    </div>
                    <div class="md:col-span-1">
                        <input type="number" placeholder="Credits" class="credit-input input-glow w-full p-3 bg-gray-100 text-gray-800 placeholder-gray-500 rounded-xl outline-none transition-all">
                    </div>
                    <div class="md:col-span-1">
                        <select class="grade-input input-glow w-full p-3 bg-gray-100 text-gray-800 rounded-xl outline-none transition-all">
                            <option value="10" class="bg-white">O (10)</option>
                            <option value="9" class="bg-white">A+ (9)</option>
                            <option value="8" class="bg-white">A (8)</option>
                            <option value="7" class="bg-white">B+ (7)</option>
                            <option value="6" class="bg-white">B (6)</option>
                            <option value="5" class="bg-white">C (5)</option>
                            <option value="0" class="bg-white">F (0)</option>
                        </select>
                    </div>
                    <div class="md:col-span-1 flex justify-center">
                        <button onclick="deleteRow(this)" class="text-gray-500 hover:text-red-500 p-3 rounded-xl transition-all hover:bg-red-100">
                            <i class="fas fa-trash text-lg"></i>
                        </button>
                    </div>
                </div>
            `;
            container.appendChild(newRow);
            attachListeners();
        }

        function deleteRow(btn) {
            const rows = document.querySelectorAll('.subject-row');
            if (rows.length > 1) {
                const row = btn.closest('.subject-row');
                row.style.transform = 'scale(0.8)';
                row.style.opacity = '0';
                setTimeout(() => {
                    row.remove();
                    calculateGPA();
                }, 300);
            } else {
                showNotification("At least one subject is required!", 'warning');
            }
        }

        function calculateGPA() {
            let totalCredits = 0;
            let totalPoints = 0;
            const rows = document.querySelectorAll('.subject-row');

            rows.forEach(row => {
                const credit = parseFloat(row.querySelector('.credit-input').value);
                const grade = parseFloat(row.querySelector('.grade-input').value);

                if (!isNaN(credit) && credit > 0) {
                    totalCredits += credit;
                    totalPoints += (credit * grade);
                }
            });

            const gpa = totalCredits > 0 ? (totalPoints / totalCredits).toFixed(2) : "0.00";

            // UI Updates with smooth animations
            const gpaDisplay = document.getElementById('currentGPA');
            const gpaStatus = document.getElementById('gpaStatus');
            const bar = document.getElementById('gpaBar');

            // Animate number change
            animateNumber(gpaDisplay, parseFloat(gpa));

            // Progress Bar & Color Coding
            const percentage = (gpa / 10) * 100;
            bar.style.width = percentage + "%";

            if (gpa >= 9) {
                bar.style.background = 'linear-gradient(45deg, #10b981, #34d399)';
                gpaStatus.innerText = 'ðŸŽ‰ Outstanding Performance!';
                gpaStatus.className = 'text-green-300 text-sm mt-3 font-medium';
            } else if (gpa >= 8) {
                bar.style.background = 'linear-gradient(45deg, #3b82f6, #60a5fa)';
                gpaStatus.innerText = 'â­ Excellent Work!';
                gpaStatus.className = 'text-blue-300 text-sm mt-3 font-medium';
            } else if (gpa >= 6) {
                bar.style.background = 'linear-gradient(45deg, #f59e0b, #fbbf24)';
                gpaStatus.innerText = 'ðŸ‘ Good Progress!';
                gpaStatus.className = 'text-yellow-300 text-sm mt-3 font-medium';
            } else if (gpa > 0) {
                bar.style.background = 'linear-gradient(45deg, #ef4444, #f87171)';
                gpaStatus.innerText = 'ðŸ’ª Keep Improving!';
                gpaStatus.className = 'text-red-300 text-sm mt-3 font-medium';
            } else {
                bar.style.background = 'linear-gradient(45deg, #6b7280, #9ca3af)';
                gpaStatus.innerText = 'Enter subjects to calculate';
                gpaStatus.className = 'text-white/70 text-sm mt-3 font-medium';
            }
        }

        function saveSemester() {
            const currentGPA = parseFloat(document.getElementById('currentGPA').innerText);
            if (currentGPA === 0) {
                showNotification("Please add subjects and credits first!", 'warning');
                return;
            }

            const semData = {
                id: Date.now(),
                gpa: currentGPA,
                date: new Date().toLocaleDateString(),
                subjects: getSubjectCount()
            };

            semesterHistory.push(semData);
            localStorage.setItem('semesterHistory', JSON.stringify(semesterHistory));
            renderHistory();
            calculateCGPA();
            showNotification(`Semester saved with GPA ${currentGPA}! ðŸŽ‰`, 'success');
        }

        function calculateCGPA() {
            const previousCGPA = parseFloat(document.getElementById('previousCGPA').value) || 0;
            const completedSemesters = parseInt(document.getElementById('completedSemesters').value) || 0;
            const currentGPA = parseFloat(document.getElementById('currentGPA').innerText) || 0;

            let totalGPA = 0;
            let totalSemesters = 0;

            // Add previous CGPA contribution (including 0 if specified)
            if (completedSemesters > 0) {
                totalGPA += previousCGPA * completedSemesters;
                totalSemesters += completedSemesters;
            }

            // Add current semester if GPA > 0
            if (currentGPA > 0) {
                totalGPA += currentGPA;
                totalSemesters += 1;
            }

            // Add saved semesters
            if (semesterHistory.length > 0) {
                const savedSum = semesterHistory.reduce((acc, curr) => acc + curr.gpa, 0);
                totalGPA += savedSum;
                totalSemesters += semesterHistory.length;
            }

            const cgpa = totalSemesters > 0 ? (totalGPA / totalSemesters).toFixed(2) : "0.00";
            const cgpaDisplay = document.getElementById('overallCGPA');
            animateNumber(cgpaDisplay, parseFloat(cgpa));
        }

        function renderHistory() {
            const container = document.getElementById('savedSemestersContainer');
            const list = document.getElementById('semesterList');

            if (semesterHistory.length > 0) {
                container.classList.remove('hidden');
                list.innerHTML = semesterHistory.map((sem, index) => `
                    <div class="glass p-6 rounded-2xl hover-lift slide-in">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-center">
                                <div class="w-3 h-3 rounded-full bg-gradient-to-r from-yellow-400 to-orange-500 mr-3"></div>
                                <p class="text-white/80 text-sm font-medium">Semester ${index + 1}</p>
                            </div>
                            <button onclick="deleteSemester(${sem.id})" class="text-white/40 hover:text-red-400 transition-all hover:scale-110">
                                <i class="fas fa-times text-lg"></i>
                            </button>
                        </div>
                        <p class="text-2xl font-bold text-white mb-2">GPA: ${sem.gpa}</p>
                        <div class="flex justify-between text-xs text-white/60">
                            <span><i class="fas fa-calendar mr-1"></i>${sem.date}</span>
                            <span><i class="fas fa-book mr-1"></i>${sem.subjects || 0} subjects</span>
                        </div>
                    </div>
                `).join('');
            } else {
                container.classList.add('hidden');
            }
        }

        function deleteSemester(id) {
            semesterHistory = semesterHistory.filter(s => s.id !== id);
            localStorage.setItem('semesterHistory', JSON.stringify(semesterHistory));
            renderHistory();
            calculateCGPA();
        }

        function resetAll() {
            if (confirm("ðŸ—‘ï¸ Clear all data? This cannot be undone.")) {
                semesterHistory = [];
                localStorage.removeItem('semesterHistory');
                showNotification("All data cleared! ðŸ§¹", 'info');
                setTimeout(() => location.reload(), 1000);
            }
        }

        function animateNumber(element, targetValue) {
            const startValue = parseFloat(element.innerText) || 0;
            const duration = 800;
            const startTime = performance.now();

            function update(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const currentValue = startValue + (targetValue - startValue) * easeOutCubic(progress);
                element.innerText = currentValue.toFixed(2);

                if (progress < 1) {
                    requestAnimationFrame(update);
                }
            }
            requestAnimationFrame(update);
        }

        function easeOutCubic(t) {
            return 1 - Math.pow(1 - t, 3);
        }

        function getSubjectCount() {
            return document.querySelectorAll('.subject-row').length;
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            const colors = {
                success: 'bg-green-500',
                warning: 'bg-yellow-500',
                error: 'bg-red-500',
                info: 'bg-blue-500'
            };

            notification.className = `fixed top-4 right-4 ${colors[type]} text-white px-6 py-3 rounded-xl shadow-lg z-50 transform translate-x-full transition-transform duration-300`;
            notification.innerText = message;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);

            setTimeout(() => {
                notification.style.transform = 'translateX(full)';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }





        function attachListeners() {
            document.querySelectorAll('input, select').forEach(el => {
                el.addEventListener('input', () => {
                    calculateGPA();
                    calculateCGPA();
                });
            });
        }

        // Initialize
        addRow(); // Initialize with one row
        attachListeners();
        renderHistory();
        calculateCGPA();
    </script>
</body>

</html>